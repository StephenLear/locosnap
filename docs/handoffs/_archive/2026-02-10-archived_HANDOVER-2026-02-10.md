# CarSnap — Session Handover
**Date:** February 10-12, 2026
**Owner:** Steve (unsunghistories@proton.me)

---

## What Happened This Session

### Starting Point
Steve came in with an idea: a "Shazam for cars" app. Users take a photo of a car, the app identifies it, shows aggregated reviews, and generates an industrial engineering-style infographic (inspired by a detailed Airbus Corporate Jet 319 blueprint he shared as reference). He wanted to launch publicly on the App Store and Google Play.

### Discovery & Planning
We went through a structured intake to nail down requirements:

- **Seriousness level:** Launch-ready product (not a prototype)
- **Technical background:** Some basics (not a developer)
- **Car ID approach:** Existing vision API (not a custom-trained model)
- **Reviews:** Aggregated scores from multiple sources
- **Infographics:** AI-generated images, shipping in v1 (not deferred — Steve was firm on this being the differentiator)
- **Platform:** React Native (Expo) for cross-platform mobile
- **Image generation:** AI image API (Steve has OpenAI keys)

Key decision: Steve pushed back on phasing the infographic to v2. It's the killer feature and ships with v1. Good call — it's what makes this app different from a Google Lens search.

### What Was Built

The complete codebase for a production-ready mobile app, consisting of 31 files across two codebases:

#### Backend (Express.js + TypeScript) — 12 source files
- **Multi-provider architecture:** Auto-detects available API keys and routes to the right provider. Works with just an OpenAI key, just an Anthropic key, or both.
- **Car identification:** `services/vision.ts` — Claude Vision or OpenAI GPT-4o Vision
- **Vehicle specs:** `services/nhtsa.ts` — Free NHTSA government API (no key required)
- **Review summaries:** `services/reviews.ts` — Claude or OpenAI generates structured review scores
- **Infographic generation:** `services/imageGen.ts` — Replicate (SDXL) or OpenAI DALL-E 3, async with polling
- **API routes:** POST `/api/identify` (main endpoint), GET `/api/image/:taskId` (poll infographic status), GET `/api/health`
- **Error handling:** Global middleware, input validation, graceful degradation when APIs are unavailable

#### Frontend (Expo + React Native + TypeScript) — 11 source files
- **Scan screen:** Camera capture + photo library picker, animated loading states
- **Results screen:** Car identity card with confidence badge, specs breakdown, review scores with progress bars, pros/cons, source links, infographic status button
- **Infographic viewer:** Full-screen image display, save-to-gallery, share sheet integration
- **History tab:** AsyncStorage-backed list of past scans, tap to revisit, swipe to delete
- **State management:** Zustand store with persistent history
- **API client:** Axios-based client with infographic polling, timeout handling, error recovery
- **Design system:** Dark theme with industrial aesthetic (steel grey, navy, orange safety accents)

#### Configuration & Docs
- `CLAUDE.md` — Full project context for future AI sessions
- `.env.example` — Environment variable template with setup instructions
- `.gitignore` — Proper exclusions for Node, Expo, secrets
- `app.json` — Expo config with camera/photo permissions for iOS and Android
- `eas.json` — EAS Build profiles for dev, preview, and production

### Code Review Results
A thorough automated review was run checking imports, types, API alignment, routing, error handling, and configuration. All 7 categories passed clean — no critical issues found.

### Late-Session Update: Multi-Provider Support
Originally the backend required an Anthropic API key. When Steve mentioned he already has OpenAI keys, we refactored:

- Split `claude.ts` into `vision.ts` (car ID) and `reviews.ts` (review summaries)
- Both services now support Claude and OpenAI, auto-detected via environment variables
- `imageGen.ts` already supported OpenAI DALL-E 3 as a fallback
- The old `claude.ts` file is dead code (couldn't delete in sandbox — needs manual removal)
- Updated `env.ts` to make all API keys optional with feature flags
- Updated server startup banner to show active providers

**Result:** Steve can run the entire app with just his OpenAI key. All three services (vision, reviews, infographics) work through OpenAI.

---

## Current State

| Component | Status |
|-----------|--------|
| Backend codebase | Complete, code-reviewed |
| Frontend codebase | Complete, code-reviewed |
| Dependencies installed | No (npm registry blocked in sandbox) |
| Backend tested locally | No |
| Frontend tested on device | No |
| Deployed | No |

The project is at the "clone and run" stage. All code is written but hasn't been executed yet.

---

## What Steve Needs To Do Next

### Immediate (to get it running)
1. **Delete** `backend/src/services/claude.ts` (dead code, replaced by `vision.ts` + `reviews.ts`)
2. **Copy** `.env.example` to `.env` in the backend folder
3. **Paste** his OpenAI API key into the `.env` file
4. **Run** `npm install` in both `/backend` and `/frontend`
5. **Start** the backend: `npm run dev` in `/backend`
6. **Start** the frontend: `npx expo start` in `/frontend`
7. **Test** by scanning the QR code with Expo Go on his phone

### Before Launch
- Sign up for a Google Play Developer account ($25 one-time)
- Deploy backend to Render.com or Railway.app
- Configure EAS Build for iOS and Android
- Create app store listings (screenshots, descriptions, icon)
- Submit for app store review
- Optionally: sign up for Anthropic API key for potentially better car identification accuracy

---

## Known Limitations & Future Work

### v1 Limitations
- No user accounts or authentication
- History is local-only (AsyncStorage, not synced across devices)
- No database — infographic task store is in-memory (resets on server restart)
- Infographic generation takes 15-60 seconds (async polling, not instant)
- Review scores are AI-generated summaries, not real-time scrapes from review sites
- No offline mode
- No monetization

### Recommended v2 Features (in priority order)
1. User accounts + cloud sync of scan history
2. Freemium model (5 free scans/month, $2.99/mo unlimited)
3. Edmunds/MotorTrend API integration for real review data
4. Social sharing (share infographic to Instagram, etc.)
5. Dealer inventory integration (see nearby listings for identified car)
6. Push notifications when infographic generation completes
7. Web version

---

## Architecture Decisions Log

| Decision | Chosen | Why | Alternatives Considered |
|----------|--------|-----|------------------------|
| Mobile framework | React Native (Expo) | Cross-platform, camera-first, Steve doesn't need to learn two languages | Flutter, native iOS/Android |
| Navigation | Expo Router | File-based routing, simpler mental model for non-developers | React Navigation |
| Backend | Express.js | Same JS ecosystem as frontend, simpler for Steve to maintain | FastAPI (Python) |
| State management | Zustand | Lightweight, minimal boilerplate | Redux, Context API |
| Car identification | Claude Vision / OpenAI GPT-4o | Excellent multimodal accuracy, no model training needed | Google Cloud Vision, custom ML model |
| Review data | AI-generated summaries | Legally safe (no scraping), no maintenance, good enough for v1 | Web scraping, Edmunds API |
| Infographic generation | DALL-E 3 / Replicate SDXL | AI image gen from detailed prompt, matches Steve's reference aesthetic | Programmatic SVG/HTML generation |
| Infographic delivery | Async with polling | Image gen takes 15-60s, can't block the main response | WebSockets, push notifications |
| Local storage | AsyncStorage | Simple, built into React Native, good enough for v1 | SQLite, Realm |
| Backend hosting | Render.com (recommended) | Simple for non-engineers, good free/cheap tiers | Heroku, Railway, Vercel |

---

## File Inventory (31 files)

```
carsnap/
├── .gitignore
├── CLAUDE.md
├── docs/handoffs/
│   └── HANDOVER-2026-02-10.md    ← This file
│
├── backend/
│   ├── .env.example
│   ├── package.json
│   ├── tsconfig.json
│   └── src/
│       ├── index.ts               # Express server + startup banner
│       ├── config/env.ts           # Env vars + feature flags
│       ├── middleware/
│       │   └── errorHandler.ts     # Global error handling
│       ├── routes/
│       │   ├── identify.ts         # POST /api/identify
│       │   └── imageStatus.ts      # GET /api/image/:taskId
│       ├── services/
│       │   ├── vision.ts           # Car ID (Claude/OpenAI)
│       │   ├── reviews.ts          # Review summaries (Claude/OpenAI)
│       │   ├── nhtsa.ts            # NHTSA specs API
│       │   ├── imageGen.ts         # Infographic gen (Replicate/OpenAI)
│       │   └── claude.ts           # ⚠️ DEAD CODE — DELETE THIS
│       └── types/index.ts
│
├── frontend/
│   ├── app.json
│   ├── eas.json
│   ├── package.json
│   ├── tsconfig.json
│   ├── app/
│   │   ├── _layout.tsx             # Root layout (Stack)
│   │   ├── results.tsx             # Results modal screen
│   │   ├── infographic.tsx         # Full-screen infographic viewer
│   │   └── (tabs)/
│   │       ├── _layout.tsx         # Tab navigation
│   │       ├── index.tsx           # Camera/scan home screen
│   │       └── history.tsx         # Past scans
│   ├── constants/
│   │   ├── theme.ts                # Design system
│   │   └── api.ts                  # API base URL
│   ├── services/api.ts             # Backend API client
│   ├── store/carStore.ts           # Zustand state
│   └── types/index.ts              # Frontend type definitions
```
